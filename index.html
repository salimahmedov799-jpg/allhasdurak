<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>alkhas AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== АНИМИРОВАННЫЙ ФОН ===== */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background-image: url("https://upload.wikimedia.org/wikipedia/commons/0/04/ChatGPT_logo.svg");
  background-size: 120%;
  background-position: center;
  filter: blur(25px) brightness(0.3);
  animation: bgmove 20s infinite alternate ease-in-out;
  z-index: -2;
}
body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: linear-gradient(
    120deg,
    rgba(0,255,153,0.15),
    rgba(0,100,255,0.15),
    rgba(255,0,200,0.15)
  );
  animation: glow 10s infinite alternate;
  z-index: -1;
}
@keyframes bgmove {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}
@keyframes glow {
  0% { opacity: 0.3; }
  100% { opacity: 0.6; }
}

/* ===== ОСНОВА ===== */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  color: #e5e7eb;
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

header {
  text-align: center;
  padding: 15px;
  font-size: 22px;
  font-weight: bold;
  backdrop-filter: blur(10px);
  background: rgba(0,0,0,0.4);
  box-shadow: 0 0 20px #00ff99;
}

/* ===== ЧАТ ===== */
#chat {
  flex: 1;
  padding: 15px;
  overflow-y: auto;
}

.msg {
  max-width: 80%;
  padding: 14px 18px;
  margin-bottom: 12px;
  border-radius: 18px;
  line-height: 1.5;
  backdrop-filter: blur(8px);
  white-space: pre-wrap;
}

.user {
  background: linear-gradient(135deg, #00ff99, #00ffaa);
  color: #000;
  margin-left: auto;
  box-shadow: 0 0 15px #00ff99;
}

.ai {
  background: rgba(0,0,0,0.6);
  border: 1px solid #00ff99;
  box-shadow: 0 0 15px rgba(0,255,153,0.3);
}

/* ===== TYPING CURSOR ===== */
.cursor {
  display: inline-block;
  animation: blink 1s infinite;
}
@keyframes blink {
  0%,50%,100% { opacity: 1; }
  25%,75% { opacity: 0; }
}

/* ===== КАРТИНКИ ===== */
img.generated {
  max-width: 100%;
  border-radius: 16px;
  margin-top: 10px;
  box-shadow: 0 0 25px #00ff99;
}

/* ===== ВВОД ===== */
footer {
  display: flex;
  gap: 8px;
  padding: 12px;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(10px);
}

input {
  flex: 1;
  padding: 14px;
  border-radius: 25px;
  border: none;
  outline: none;
  font-size: 16px;
}

button {
  padding: 14px 18px;
  border-radius: 25px;
  border: none;
  cursor: pointer;
  font-weight: bold;
  background: #00ff99;
  color: #000;
  box-shadow: 0 0 15px #00ff99;
  transition: transform 0.2s, box-shadow 0.2s;
}
button:hover {
  transform: scale(1.1);
  box-shadow: 0 0 25px #00ff99;
}
</style>
</head>

<body>

<header>alkhas AI • Free Neural Network</header>

<div id="chat"></div>

<footer>
  <input id="prompt" placeholder="Напиши запрос..." />
  <button onclick="sendText()">Текст</button>
  <button onclick="sendImage()">Картинка</button>
</footer>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("prompt");
const HF_TOKEN = ""; // можно оставить пустым

function addMessage(text, cls) {
  const div = document.createElement("div");
  div.className = "msg " + cls;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
  return div;
}

/* ===== TYPING EFFECT ===== */
function typeText(element, text, speed = 25) {
  element.innerHTML = "";
  let i = 0;
  const cursor = document.createElement("span");
  cursor.className = "cursor";
  cursor.textContent = "▍";
  element.appendChild(cursor);

  const interval = setInterval(() => {
    cursor.remove();
    element.textContent += text[i];
    element.appendChild(cursor);
    i++;
    chat.scrollTop = chat.scrollHeight;

    if (i >= text.length) {
      clearInterval(interval);
      cursor.remove();
    }
  }, speed);
}

async function sendText() {
  const text = input.value.trim();
  if (!text) return;
  input.value = "";

  addMessage(text, "user");
  const thinking = addMessage("Думаю…", "ai");

  const res = await fetch(
    "https://api-inference.huggingface.co/models/gpt2",
    {
      method: "POST",
      headers: {
        "Authorization": HF_TOKEN ? "Bearer " + HF_TOKEN : undefined,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ inputs: text })
    }
  );

  const data = await res.json();
  const answer = data[0]?.generated_text || "Ошибка генерации";

  thinking.textContent = "";
  typeText(thinking, answer);
}

async function sendImage() {
  const text = input.value.trim();
  if (!text) return;
  input.value = "";

  addMessage(text, "user");
  addMessage("Генерирую изображение…", "ai");

  const res = await fetch(
    "https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-2",
    {
      method: "POST",
      headers: {
        "Authorization": HF_TOKEN ? "Bearer " + HF_TOKEN : undefined,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ inputs: text })
    }
  );

  const blob = await res.blob();
  chat.lastChild.remove();

  const img = document.createElement("img");
  img.src = URL.createObjectURL(blob);
  img.className = "generated";
  chat.appendChild(img);
  chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
